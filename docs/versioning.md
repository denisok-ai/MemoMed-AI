<!--
  @file: versioning.md
  @description: Правила версионирования MemoMed AI
  @created: 2026-02-22
-->

# Версионирование MemoMed AI

Проект использует **семантическое версионирование** [Semantic Versioning](https://semver.org/lang/ru/) (SemVer): `MAJOR.MINOR.PATCH`.

## Где хранится версия

- **`package.json`** — поле `version` (единственный источник для сборки и тегов).
- **`CHANGELOG.md`** (в корне) — история изменений по версиям. Перед каждым релизом в CHANGELOG добавляется секция `[X.Y.Z] — ДДДД-ММ-ГГ` и при необходимости переносится содержимое из `[Unreleased]`.

## Когда повышать версию

| Тип изменения                                                      | Повышаем          | Пример                                  |
| ------------------------------------------------------------------ | ----------------- | --------------------------------------- |
| Критическая обратная несовместимость API/БД/конфига                | **MAJOR** (1.0.0) | Удаление поля API, смена формата ответа |
| Новая функциональность без ломания старого                         | **MINOR** (0.2.0) | Новая страница, новый API-эндпоинт      |
| Исправления багов, правки текстов, рефакторинг без смены контракта | **PATCH** (0.1.1) | Фикс бага, правка доступности           |

До выхода стабильного релиза (1.0.0) версия остаётся в формате **0.x.y**. После 1.0.0 — полный SemVer.

## Порядок действий при релизе

1. Внести все изменения в **CHANGELOG.md** в секции `[Unreleased]` (или уже вести их там по ходу работы).
2. Обновить версию в **package.json**: `npm version patch` или `npm version minor` (создаст коммит и тег) **или** вручную поменять `version` и сделать коммит.
3. В **CHANGELOG.md** переименовать `[Unreleased]` в `[X.Y.Z] — ДДДД-ММ-ГГ` и добавить ссылку на тег внизу файла (см. существующие ссылки).
4. Закоммитить CHANGELOG при ручном обновлении версии.
5. При необходимости создать тег: `git tag v0.1.0` (если не использовали `npm version`).

## Полезные команды

```bash
# Увеличить PATCH (0.1.0 → 0.1.1)
npm version patch

# Увеличить MINOR (0.1.0 → 0.2.0)
npm version minor

# Увеличить MAJOR (0.1.0 → 1.0.0)
npm version major
```

`npm version` автоматически обновит `package.json`, создаст коммит и тег (например `v0.1.1`). CHANGELOG нужно обновить вручную перед или после этого.

## Связанные файлы

- [CHANGELOG.md](../CHANGELOG.md) — журнал изменений по версиям
- [Трекер задач](tasktracker.md) — этапы и версии продукта (v1.0, v1.1, …)
- [Дневник разработки](diary.md) — контекст решений и детали реализации
